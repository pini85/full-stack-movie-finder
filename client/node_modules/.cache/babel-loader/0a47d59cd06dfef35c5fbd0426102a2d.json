{"ast":null,"code":"var _jsxFileName = \"/home/pinchas/code/projects/movie-finder/src/components/Search/Search.component.jsx\";\nimport React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { compose } from \"redux\";\nimport { search, fetchMovies, movieSuggestions, showSearchResults, fetchCastSuggestion } from \"../../redux/actions\";\nimport { tmdbQueryApi } from \"../../apis/tmdbApi\";\nimport Suggestions from \"../Suggestions/Suggestions.component\";\nimport Button from \"../Button/Button\";\nimport Input from \"../Input/Input.component\";\nimport useDidUpdateEffect from \"../../hooks/useDidUpdateEffect.hooks\";\nimport useWidth from \"../../hooks/useWidth.hooks\";\n\nconst Search = props => {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const width = useWidth().width;\n  useDidUpdateEffect(() => {\n    setTimeout(async () => {\n      const data = !!searchQuery.length && (await tmdbQueryApi(1, searchQuery));\n      props.fetchCastSuggestion(null, searchQuery, true);\n      console.log(props.castSuggestions);\n      props.movieSuggestions(data);\n    }, 150);\n  }, [searchQuery]);\n\n  const handleClick = () => {\n    props.search(searchQuery);\n    props.fetchMovies(1);\n    props.showSearchResults(\"search\");\n    setSearchQuery(\"\");\n\n    if (width < 500) {\n      props.setOpen(val => !val);\n    }\n\n    props.history.push(`/search/q=${searchQuery}/page/1`);\n  };\n\n  const handleKeyDown = e => {\n    if (e.keyCode === 13) {\n      handleClick();\n    }\n  };\n\n  const container = {\n    display: \"flex\",\n    alignItems: \"center\"\n  };\n\n  const handleChange = e => {\n    setSearchQuery(e.target.value);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    onKeyDown: handleKeyDown,\n    style: container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    value: searchQuery,\n    handleOnChange: handleChange,\n    placeholder: \"The world is your oyster...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    search: true,\n    title: \"search\" // disabled={isSending}\n    ,\n    handleClick: e => handleClick(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }), props.userSuggestions && /*#__PURE__*/React.createElement(Suggestions, {\n    items: props.movieSuggestions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 33\n    }\n  }));\n};\n\nconst mapStateToProps = state => ({\n  isSending: state.isSending,\n  // fetchMoves: state.fetchMovies,\n  selectedMovies: state.selectedMovies,\n  movieSuggestions: state.movieSuggestions,\n  castSuggestions: state.castSuggestions,\n  query: state.search\n});\n\nexport default compose(withRouter, connect(mapStateToProps, {\n  search: search,\n  fetchMovies: page => fetchMovies(page),\n  movieSuggestions: movieSuggestions,\n  showSearchResults: showSearchResults,\n  fetchCastSuggestion: fetchCastSuggestion\n}))(Search);","map":{"version":3,"sources":["/home/pinchas/code/projects/movie-finder/src/components/Search/Search.component.jsx"],"names":["React","useState","connect","withRouter","compose","search","fetchMovies","movieSuggestions","showSearchResults","fetchCastSuggestion","tmdbQueryApi","Suggestions","Button","Input","useDidUpdateEffect","useWidth","Search","props","searchQuery","setSearchQuery","width","setTimeout","data","length","console","log","castSuggestions","handleClick","setOpen","val","history","push","handleKeyDown","e","keyCode","container","display","alignItems","handleChange","target","value","userSuggestions","mapStateToProps","state","isSending","selectedMovies","query","page"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { compose } from \"redux\";\nimport {\n  search,\n  fetchMovies,\n  movieSuggestions,\n  showSearchResults,\n  fetchCastSuggestion,\n} from \"../../redux/actions\";\nimport { tmdbQueryApi } from \"../../apis/tmdbApi\";\nimport Suggestions from \"../Suggestions/Suggestions.component\";\nimport Button from \"../Button/Button\";\nimport Input from \"../Input/Input.component\";\nimport useDidUpdateEffect from \"../../hooks/useDidUpdateEffect.hooks\";\nimport useWidth from \"../../hooks/useWidth.hooks\";\n\nconst Search = (props) => {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const width = useWidth().width;\n\n  useDidUpdateEffect(() => {\n    setTimeout(async () => {\n      const data = !!searchQuery.length && (await tmdbQueryApi(1, searchQuery));\n      props.fetchCastSuggestion(null, searchQuery, true);\n      console.log(props.castSuggestions);\n      props.movieSuggestions(data);\n    }, 150);\n  }, [searchQuery]);\n\n  const handleClick = () => {\n    props.search(searchQuery);\n    props.fetchMovies(1);\n    props.showSearchResults(\"search\");\n    setSearchQuery(\"\");\n    if (width < 500) {\n      props.setOpen((val) => !val);\n    }\n    props.history.push(`/search/q=${searchQuery}/page/1`);\n  };\n  const handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      handleClick();\n    }\n  };\n\n  const container = {\n    display: \"flex\",\n    alignItems: \"center\",\n  };\n  const handleChange = (e) => {\n    setSearchQuery(e.target.value);\n  };\n\n  return (\n    <div onKeyDown={handleKeyDown} style={container}>\n      <Input\n        value={searchQuery}\n        handleOnChange={handleChange}\n        placeholder=\"The world is your oyster...\"\n      />\n      <Button\n        search={true}\n        title={\"search\"}\n        // disabled={isSending}\n        handleClick={(e) => handleClick(e)}\n      ></Button>\n\n      {props.userSuggestions && <Suggestions items={props.movieSuggestions} />}\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  isSending: state.isSending,\n  // fetchMoves: state.fetchMovies,\n  selectedMovies: state.selectedMovies,\n  movieSuggestions: state.movieSuggestions,\n  castSuggestions: state.castSuggestions,\n  query: state.search,\n});\n\nexport default compose(\n  withRouter,\n  connect(mapStateToProps, {\n    search: search,\n    fetchMovies: (page) => fetchMovies(page),\n    movieSuggestions: movieSuggestions,\n    showSearchResults: showSearchResults,\n    fetchCastSuggestion: fetchCastSuggestion,\n  })\n)(Search);\n"]},"metadata":{},"sourceType":"module"}